---
# Watches the file and runs a playbook if it's deleted.
sources:
  - name: watch-index
    ansible.eda.watchdog:
      src_path: /var/www/html/index.html
      recursive: false

rules:
  - name: Restore index.html if deleted
    condition: event.event_type == "deleted" and event.src_path == "/var/www/html/index.html"
    actions:
      - run_playbook:
          name: restore-index.yml
